<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manga Character Builder</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Zen+Dots&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app">
    <header>
      <h1>Manga Character Builder</h1>
      <p class="subtitle">Powered by Nano Banana (Gemini 2.5 Flash Image)</p>
    </header>

    <main>
      <section class="controls">
        <h2>Build Your Character</h2>

        <div class="field">
          <label>Gender</label>
          <div class="chips" data-key="gender">
            <button class="chip active" data-value="male">Male</button>
            <button class="chip" data-value="female">Female</button>
            <button class="chip" data-value="neutral">Neutral</button>
          </div>
        </div>

        <div class="field">
          <label>Hair Style</label>
          <div class="chips" data-key="hairStyle">
            <button class="chip active" data-value="short spiky">Spiky</button>
            <button class="chip" data-value="long flowing">Long</button>
            <button class="chip" data-value="twin tails">Twin Tails</button>
            <button class="chip" data-value="bowl cut">Bowl</button>
          </div>
        </div>

        <div class="field">
          <label>Hair Color</label>
          <div class="chips" data-key="hairColor">
            <button class="chip active" data-value="black">Black</button>
            <button class="chip" data-value="white">White</button>
            <button class="chip" data-value="silver">Silver</button>
            <button class="chip" data-value="red">Red</button>
            <button class="chip" data-value="blonde">Blonde</button>
          </div>
        </div>

        <div class="field">
          <label>Personality</label>
          <div class="chips" data-key="personality">
            <button class="chip active" data-value="calm and stoic">Stoic</button>
            <button class="chip" data-value="fierce and intense">Fierce</button>
            <button class="chip" data-value="cheerful and energetic">Cheerful</button>
            <button class="chip" data-value="mysterious and brooding">Mysterious</button>
          </div>
        </div>

        <div class="field">
          <label>Outfit</label>
          <div class="chips" data-key="outfit">
            <button class="chip active" data-value="classic Japanese school uniform, white shirt, dark blazer, tie">School Uniform</button>
            <button class="chip" data-value="preppy style, blazer, collared shirt, slacks">Preppy</button>
            <button class="chip" data-value="casual streetwear, hoodie, jeans">Streetwear</button>
            <button class="chip" data-value="athletic PE uniform, tracksuit">Athletic</button>
            <button class="chip" data-value="gakuran, traditional Japanese boys school uniform, standing collar jacket">Gakuran</button>
            <button class="chip" data-value="torn and disheveled school uniform, battle-worn">Battle-Worn</button>
          </div>
        </div>

        <div class="field">
          <label>Weapon</label>
          <div class="chips" data-key="weapon">
            <button class="chip active" data-value="none">None</button>
            <button class="chip" data-value="katana">Katana</button>
            <button class="chip" data-value="magic staff">Staff</button>
            <button class="chip" data-value="twin daggers">Daggers</button>
            <button class="chip" data-value="giant hammer">Hammer</button>
          </div>
        </div>

        <div class="field face-upload-field">
          <label>Face Reference <span class="optional">optional</span></label>
          <div class="face-upload" id="faceUpload">
            <input type="file" id="faceInput" accept="image/*" hidden />
            <div class="face-drop-zone" id="faceDropZone">
              <div class="face-preview" id="facePreview" hidden>
                <img id="faceThumb" src="" alt="Face reference" />
                <button class="face-clear" id="faceClear" type="button">‚úï</button>
              </div>
              <div class="face-prompt" id="facePromptText">
                <span class="upload-icon">üì∑</span>
                <span>Upload a photo to map your face onto the character</span>
              </div>
            </div>
          </div>
        </div>

        <button class="generate-btn" id="generateBtn">Generate Character</button>
      </section>

      <section class="output">
        <div class="result-panel" id="resultPanel">
          <div class="placeholder">
            <div class="placeholder-icon">‚õ©Ô∏è</div>
            <p>Your character will appear here</p>
          </div>
        </div>

        <div class="meta" id="meta" hidden>
          <div class="stat-badges">
            <div class="latency-badge" id="latencyBadge"></div>
            <div class="cost-badge" id="costBadge"></div>
          </div>
          <button class="next-btn" id="nextBtn">Next Scene ‚Üí</button>
          <details>
            <summary>Prompt used</summary>
            <pre id="promptText"></pre>
          </details>
        </div>

        <!-- Panel view -->
        <div class="panel-view" id="panelView" hidden>
          <h3 class="panel-title">Scene 1 ‚Äî Classroom</h3>
          <div class="result-panel" id="panelPanel">
            <div class="placeholder"><div class="placeholder-icon">üè´</div><p>Panel generating‚Ä¶</p></div>
          </div>
          <div class="meta" id="panelMeta" hidden>
            <div class="stat-badges">
              <div class="latency-badge" id="panelLatencyBadge"></div>
              <div class="cost-badge" id="panelCostBadge"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
